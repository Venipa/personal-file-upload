(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{100:function(e,t,n){(e.exports=n(2)(!1)).push([e.i,".item-row {\n  padding: 0 1.25em;\n  line-height: 40px;\n  height: 40px;\n  vertical-align: middle;\n}\n.item-row:hover {\n  background-color: #f4f4f4;\n}\n.item-row .btn-showFile {\n  cursor: pointer;\n}\n.item-row .open-item-direct {\n  white-space: pre;\n  text-overflow: ellipsis;\n  max-width: 100%;\n  width: 300px;\n  display: block;\n  overflow: hidden;\n}\n@media (max-width: 768) {\n.item-row .open-item-direct {\n    width: 100px;\n}\n}",""])},130:function(e,t,n){"use strict";n.r(t);var i=n(4),o=n(6),r=n(40),s=n.n(r),a=n(45),l=n(39),c=n(7),d=n(44),u=n.n(d),p=n(10),f=u()(),v={components:{"app-spinner":p.PulseLoader,"file-drop":f},data:function(){return{dropzoneOptions:{url:window.location.origin+"/api/v1/upload",headers:i.axios.defaults.headers,method:"post",thumbnailWidth:150,maxFilesize:150,createImageThumbnails:!1,maxFiles:20,autoProcessQueue:!1,parallelUploads:1,addRemoveLinks:!0},pond:{files:[],options:{instantUpload:!1}},isLoading:!1}},created:function(){},methods:{open:function(){this.$refs.showUpload.show()},close:function(){this.$refs.showUpload.hide()},onUpload:function(e){var t=this.$refs.uploadDrop,n=t.getFiles().filter((function(e){return[2].includes(e.status)}));(null==n?void 0:n.length)?(this.isLoading=!0,t.processFiles()):t.browse()},handleFilePondInit:function(e){console.log(e)},onReloadAll:function(){this.$refs.uploadDrop.getFiles().filter((function(e){return[5].includes(e.status)})).length>0&&this.$emit("on-upload-complete",this.$refs.uploadDrop)},onFileComplete:function(){0===this.$refs.uploadDrop.getFiles().filter((function(e){return[2,3,9,7].includes(e.status)})).length&&(this.isLoading=!1)},onComplete:function(){this.isLoading=!1,this.$emit("on-upload-complete",this.$refs.uploadDrop)}}},h=(n(95),n(1)),m=Object(h.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-modal",{ref:"showUpload",attrs:{centered:"",title:"Upload",size:"xl","no-close-on-esc":e.isLoading,"no-close-on-backdrop":e.isLoading},on:{hide:e.onReloadAll},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[n("div",{staticClass:"d-flex flex-column"},[n("b-button",{staticClass:"d-flex flex-row",attrs:{variant:"dark",disabled:e.isLoading},on:{click:function(t){return t.preventDefault(),e.onUpload(t)}}},[n("span",[e._v("Upload")]),e._v(" "),e.isLoading?n("app-spinner",{staticClass:"ml-2",attrs:{size:8,sizeUnit:"px",color:"#ffffff"}}):e._e()],1)],1)]},proxy:!0}])},[e._v(" "),n("div",{staticClass:"d-flex flex-column drop-wrapper"},[n("file-drop",{ref:"uploadDrop",attrs:{name:"file","label-idle":"Drop files here...","allow-multiple":"true",server:"/api/v1/upload",instantUpload:!1,method:"post","max-files":25,allowRevert:!1,files:e.pond.files},on:{processfile:e.onFileComplete,init:e.handleFilePondInit}})],1)])}),[],!1,null,null,null).exports,g=n(43),w=n.n(g);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _={components:{"atom-spinner":l.a,UploadDialogComponent:m,VertMoreIcon:a.a},data:function(){return{files:null,user:null,sizeUsed:null,sizeMax:null,maxUploadSize:null,selectedFile:null,isLoading:!0,prevPage:null,message:null}},computed:{appName:function(){return window.appName},humanStorageStat:function(){return"".concat(s()(this.sizeUsed)," / ").concat(s()(this.sizeMax))},showFileTitle:function(){var e;return null===(e=this.selectedFile)||void 0===e?void 0:e.title}},methods:{openUploadDialog:function(){this.$refs.uploadDialog.open()},setSuccess:function(e){this.message={content:e,type:"success"}},setError:function(e){this.message={content:e,type:"danger"}},route:function(e){return"".concat(this.$root.$el.ownerDocument.location.origin,"/").concat(0===e.indexOf("/")?e.substring(1):e)},copyLink:function(e){this.$clipboard(this.route("/f/".concat(e.share_token)))},download:function(e){Object(o.b)(this.route("/i/".concat(e.share_token)),{target:"_self"})},reloadFileList:function(){this._onPageChange(this.prevPage)},deletePrecheck:function(e){return this.$bvModal.msgBoxConfirm("Deleting ".concat(e.filename),{title:"Are you sure?",size:"sm",buttonSize:"sm",okVariant:"danger",okTitle:"YES",cancelTitle:"NO",footerClass:"p-2",hideHeaderClose:!1,centered:!0})},deleteItem:function(e){var t=this;this.deletePrecheck(e).then((function(n){n&&(t.isLoading=!0,c.a.deleteFile(e.share_token).then((function(e){var n,i;(null===(n=e.data)||void 0===n?void 0:n.message)&&(t.setSuccess(null===(i=e.data)||void 0===i?void 0:i.message),t._onPageChange(t.prevPage||1).then((function(e){t.isLoading=!1})))})).catch((function(e){var n=e.error,i=e.data;(null==i?void 0:i.errors)?t.setError(o.a.getFirstError(i.errors)):t.setError(o.a.getResponseErrorString(n)),t.isLoading=!1})))}))},closeShowFile:function(){this.$refs.showFile.hide()},humanStorageParse:function(e){return s()(e)},openShowFile:function(e){if(this.selectedFile=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{url:/^(video|audio)/.test(e.filemime)?"/embed/".concat(e.share_token):null}),!this.selectedFile.url)return Object(o.b)("/f/".concat(e.share_token),{target:"_blank"});this.$refs.showFile.title="Viewing: ".concat(e.filename),this.$refs.showFile.show()},onShowFileClose:function(){this.$refs.showFile.title=null,this.selectedFile=null},onPageChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.prevPage!==e){if(null!==this.prevPage){var t=new w.a(window.location.href,!0);t.query.page=e,history.pushState(null,window.document.title,t.toString())}return this.prevPage=e,this._onPageChange(e)}},_onPageChange:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.isLoading=!0,i.axios.get("/user/files?page=".concat(t)).then((function(e){return e.data})).then((function(t){t&&Object.assign(e.$data,t),e.isLoading=!1})).catch((function(t){e.isLoading=!1}))}},mounted:function(){var e=new w.a(window.location.href,!0).query.page;this.onPageChange(e&&e>0?e:1)}},y=(n(99),Object(h.a)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"list-file-wrapper"},[n("div",{staticClass:"container d-flex flex-column my-3"},[n("div",{staticClass:"row mb-3"},[n("div",{staticClass:"col d-flex flex-row justify-content-start align-items-center"},[n("img",{attrs:{height:"64",src:"/images/logo.svg",alt:"Logo"}}),e._v(" "),n("a",{staticClass:"text-dark text-decoration-none",attrs:{href:"/dashboard/"}},[n("h4",{staticClass:"ml-2"},[e._v(e._s(e.appName))])])])]),e._v(" "),e.message?n("div",{staticClass:"row mb-3"},[n("div",{staticClass:"col d-flex flex-column"},[n("div",{class:"card alert alert-"+e.message.type},[e._v(e._s(e.message.content))])])]):e._e(),e._v(" "),e.files?n("div",{staticClass:"d-flex flex-column table table-sm"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-header d-flex flex-row justify-content-start align-items-center"},[n("button",{staticClass:"btn btn-sl mr-3",on:{click:e.openUploadDialog}},[e._v("Upload")]),e._v(" "),n("div",{staticClass:"flex-fill"},[e._v("Files")]),e._v(" "),e.sizeUsed&&e.sizeMax&&e.maxUploadSize?n("div",{staticClass:"d-flex flex-row justify-content-start align-items-center"},[-1!=e.maxUploadSize?n("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"badge badge-success mr-2",attrs:{title:"Max Filesize"}},[e._v(e._s(e.humanStorageParse(e.maxUploadSize)))]):e._e(),e._v(" "),-1!=e.sizeMax?n("b-progress",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticStyle:{width:"100px",height:"1.5em"},attrs:{max:e.sizeMax,"show-progress":"",animated:"",title:e.humanStorageStat}},[n("b-progress-bar",{attrs:{value:e.sizeUsed}},[n("strong",[e._v(e._s((e.sizeUsed/e.sizeMax*100).toFixed(2))+"%")])])],1):n("span",{staticClass:"badge"},[e._v(e._s(e.humanStorageParse(e.sizeUsed))+" / Unlimited")])],1):e._e()]),e._v(" "),n("div",{staticClass:"card-body py-1 mb-1 px-0 position-relative"},[e.isLoading?n("div",{staticClass:"fill-spinner"},[n("atom-spinner",{attrs:{"animation-duration":1e3,size:60,color:"#7289da"}})],1):e._e(),e._v(" "),e._l(e.files.data,(function(t){return n("div",{key:t.id,staticClass:"item-row d-flex flex-row justify-content-start align-items-center"},[n("div",{staticClass:"mr-3 text-right",staticStyle:{width:"50px"}},[e._v(e._s(t.id))]),e._v(" "),n("div",{staticClass:"flex-fill mr-2"},[n("div",{staticClass:"open-item-direct"},[e._v(e._s(t.filename))])]),e._v(" "),n("div",{staticClass:"mr-3 badge text-right",staticStyle:{flex:"0 0 100px"}},[e._v(e._s(e.humanStorageParse(t.filesize)))]),e._v(" "),n("div",{staticClass:"mr-1 btn-showFile",staticStyle:{flex:"0 0 100px"},on:{click:function(n){return e.openShowFile(t)}}},[e._v(e._s(t.share_token))]),e._v(" "),n("div",{staticClass:"d-flex flex-row justify-content-center align-items-center"},[n("b-dropdown",{attrs:{variant:"link","toggle-class":"btn-icon text-dark","no-caret":"",right:""},scopedSlots:e._u([{key:"button-content",fn:function(){return[n("vert-more-icon",{attrs:{size:20}})]},proxy:!0}],null,!0)},[e._v(" "),n("b-dropdown-item",{on:{click:function(n){return e.copyLink(t)}}},[e._v("Copy Link")]),e._v(" "),n("b-dropdown-item",{on:{click:function(n){return e.download(t)}}},[e._v("Download")]),e._v(" "),n("b-dropdown-item",{attrs:{variant:"danger"},on:{click:function(n){return e.deleteItem(t)}}},[e._v("Delete")])],1)],1)])}))],2)])]):e._e(),e._v(" "),n("div",{staticClass:"d-flex flex-column justify-content-center align-items-center"},[e.files?n("b-pagination",{attrs:{"total-rows":e.files.total,"per-page":e.files.per_page,disabled:e.isLoading},on:{change:e.onPageChange},model:{value:e.files.current_page,callback:function(t){e.$set(e.files,"current_page",t)},expression:"files.current_page"}}):e._e()],1)]),e._v(" "),n("b-modal",{ref:"showFile",attrs:{"hide-footer":!0},on:{hidden:e.onShowFileClose}},[e.selectedFile?n("div",{staticClass:"d-flex flex-column"},[e.selectedFile.url?n("iframe",{attrs:{src:e.selectedFile.url,height:"300",frameborder:"0"}}):n("span",{staticClass:"text-muted"},[e._v("Unable to display file")]),e._v(" "),n("div",{staticClass:"mt-3 d-flex justify-content-end"},[n("b-button",{attrs:{variant:"primary"},on:{click:e.closeShowFile}},[e._v("Close")])],1)]):e._e()]),e._v(" "),n("upload-dialog-component",{ref:"uploadDialog",on:{"on-upload-complete":e.reloadFileList}})],1)}),[],!1,null,null,null));t.default=y.exports},14:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,24}))$/},35:function(e,t,n){var i=n(96);"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(3)(i,o);i.locals&&(e.exports=i.locals)},36:function(e,t,n){var i=n(100);"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(3)(i,o);i.locals&&(e.exports=i.locals)},6:function(e,t,n){"use strict";var i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{download:null,target:null},n=document.createElement("a");n.style="width: 0; height: 0; opacity: 0; visibility: hidden;",n.href=e,t.target&&(n.target=t.target),t.download&&(n.setAttribute("download",t.download),n.removeAttribute("target")),console.log(n),n.click(),n.remove()},o=(n(14),{getFirstError:function(e){return e[Object.keys(e)[0]][0]},getResponseErrorString:function(e){var t,n;return"".concat((null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.status)||"403",": ").concat((null==e?void 0:null===(n=e.response)||void 0===n?void 0:n.statusText)||"Something went wrong")}});n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}))},7:function(e,t,n){"use strict";var i=n(4),o={login:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise((function(o,r){return i.axios.post("auth/login",{email:e,password:t,remember:n}).then((function(e){return o(e)}),(function(e,t){var n;return r({error:e,data:null==e?void 0:null===(n=e.response)||void 0===n?void 0:n.data})}))}))},currentUser:function(){return new Promise((function(e,t){return i.axios.get("user").then((function(t){return e(t)}),(function(e){var n;return t({error:e,data:null==e?void 0:null===(n=e.response)||void 0===n?void 0:n.data})}))}))},generateNew:function(){return new Promise((function(e,t){return i.axios.post("user/gen-secret").then((function(t){return e(t)}),(function(e){var n;return t({error:e,data:null==e?void 0:null===(n=e.response)||void 0===n?void 0:n.data})}))}))},statistics:function(){return new Promise((function(e,t){return i.axios.get("user/statistics").then((function(t){return e(t)}),(function(e){var n;return t({error:e,data:null==e?void 0:null===(n=e.response)||void 0===n?void 0:n.data})}))}))},deleteFile:function(e){return new Promise((function(t,n){return i.axios.post("user/file/delete",{token:e}).then((function(e){return t(e)}),(function(e){var t;return n({error:e,data:null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.data})}))}))},uploadFile:function(e){var t=new FormData;return t.append("file",e),new Promise((function(e,n){return i.axios.post("upload",t).then((function(t){return e(t)}),(function(e){var t;return n({error:e,data:null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.data})}))}))}};n.d(t,"a",(function(){return o}))},95:function(e,t,n){"use strict";var i=n(35);n.n(i).a},96:function(e,t,n){(e.exports=n(2)(!1)).push([e.i,".drop-wrapper .filepond--file .filepond--action-process-item.filepond--file-action-button {\n  display: none;\n}\n.drop-wrapper .filepond--root {\n  margin-bottom: 0;\n}\n.drop-wrapper .filepond--item {\n  margin: 0 -12px;\n}\n.drop-wrapper .filepond--wrapper {\n  margin: -16px;\n}\n.drop-wrapper .filepond--panel-top,\n.drop-wrapper .filepond--panel-bottom {\n  border-radius: 0 !important;\n}",""])},99:function(e,t,n){"use strict";var i=n(36);n.n(i).a}}]);